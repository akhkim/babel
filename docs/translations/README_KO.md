# Babel - 실시간 오디오 번역 및 자막 오버레이

**[English](../../README.md) | [Español](README_ES.md) | [Français](README_FR.md) | [Deutsch](README_DE.md) | [Português](README_PT.md) | [日本語](README_JA.md) | 한국어 | [中文](README_ZH.md)**

PC의 내부 오디오를 캡처하여 Faster-Whisper와 Google Translate를 사용해 실시간으로 번역하고, 번역된 자막을 화면에 오버레이로 표시하는 Python 애플리케이션입니다.

## 🌟 기능

### 🎵 **오디오 캡처**
- **자동 감지**: 최적의 루프백 장치를 자동으로 찾습니다 (스테레오 믹스, 가상 오디오 케이블)
- **수동 선택**: 장치 세부 정보와 함께 사용 가능한 입력 장치에서 선택
- **앱별 캡처**: 개별 애플리케이션을 캡처하기 위한 가상 오디오 케이블 지원
- **시스템 오디오**: 모든 PC 오디오 또는 특정 애플리케이션 오디오 캡처

### 🧠 **AI 기반 번역**
- **음성 인식**: Faster-Whisper 모델 사용 (tiny, turbo, large-v3, distil-large-v3)
- **자동 언어 감지**: Whisper가 소스 언어를 자동으로 감지하도록 설정
- **90개 이상의 소스 언어**: Whisper가 전사할 수 있는 모든 주요 언어 지원
- **100개 이상의 대상 언어**: Google Translate에서 지원하는 모든 언어로 번역
- **실시간 처리**: 낮은 지연 시간과 메모리 사용량에 최적화

### 📺 **전문적인 자막**
- **오버레이 표시**: 투명하고 항상 최상위에 표시되는 자막 오버레이
- **사용자 정의 글꼴**: 10가지 인기 글꼴과 다양한 크기 선택 (10px-48px)
- **위치 조정 가능**: 화면의 어느 위치로든 자막을 드래그하여 이동
- **자동 지우기**: 무음 상태에서 자막이 자동으로 사라짐
- **모던 디자인**: 가독성을 위한 반투명 배경과 텍스트 테두리

### 🌍 **다국어 인터페이스**
- **6개 UI 언어**: 영어, 스페인어, 프랑스어, 독일어, 포르투갈어, 한국어
- **완전한 현지화**: 모든 메뉴, 버튼, 설명 및 언어 이름이 번역됨
- **동적 전환**: 인터페이스 언어를 변경하면 즉시 업데이트됨
- **언어별 드롭다운**: 현재 인터페이스 언어로 언어 이름 표시

### ⚙️ **스마트 설정**
- **지속적인 구성**: 모든 설정이 `babel_settings.json`에 자동 저장
- **성능 모드**: 속도와 정확도 간 전환
- **오디오 감도**: 배경 소음을 필터링하는 조정 가능한 임계값
- **알파벳 탐색**: 드롭다운에서 문자를 입력하여 옵션을 빠르게 찾기

## 📋 요구 사항

- **Python**: 3.9 이상
- **운영 체제**: Windows (WASAPI 루프백 오디오 캡처용)
- **메모리**: 최소 4GB RAM (대형 모델의 경우 8GB 권장)
- **저장 공간**: Whisper 모델용 1-5GB (자동 다운로드)
- **인터넷**: Google Translate API 필요

## 🚀 설치

1. **이 저장소를 복제하거나 다운로드**
2. **종속성 설치**:
   ```bash
   pip install -r requirements.txt
   ```
3. **애플리케이션 실행**:
   ```bash
   python main.py
   ```
   또는 제공된 배치 파일 사용:
   ```bash
   run.bat
   ```

## 📖 빠른 시작 가이드

### 기본 설정
1. **애플리케이션 실행**: `python main.py`
2. **오디오 입력**: "자동 (권장)" 선택 또는 특정 장치 선택
3. **언어**: 
   - **소스**: 소스 언어 선택 또는 "자동 감지"
   - **대상**: 대상 언어 선택 (기본값: 영어)
4. **"▶️ 번역 시작" 클릭**

### 초기 설정 팁
- **오디오 테스트**: 마이크/시스템 오디오가 작동하는지 확인하기 위해 말하거나 오디오 재생
- **감도 조정**: 값이 낮을수록 조용한 오디오에 더 민감함
- **자막 위치**: "⚙ 자막 위치 조정"을 사용하여 원하는 곳에 배치
- **모델 선택**: 균형잡힌 속도/정확도를 위해 "turbo" 권장
- **빠른 언어 선택**: 언어 드롭다운에서 문자를 입력하여 옵션으로 이동 (예: "E"를 입력하면 영어)
- **모든 설정 저장**: 세션 간에 기본 설정이 자동으로 기억됨

## 🌍 사용자 인터페이스 언어

Babel은 다음 언어로 사용자 인터페이스를 지원합니다:
- **영어** (기본값)
- **스페인어** (Español)
- **프랑스어** (Français) 
- **독일어** (Deutsch)
- **포르투갈어** (Português)
- **한국어** (기본값)

"⚙ 설정" 페이지에서 "UI 언어" 드롭다운을 사용하여 UI 언어를 변경하세요. 모든 메뉴, 버튼, 설명, 툴팁 및 언어 이름이 선택한 언어로 표시됩니다.

## 🗣️ 지원 언어

### 소스 언어 (Whisper 인식)
**자동 감지**, 아프리칸스어, 알바니아어, 암하라어, 아랍어, 아르메니아어, 아삼어, 아제르바이잔어, 바시키르어, 바스크어, 벨라루스어, 벵골어, 보스니아어, 브르타뉴어, 불가리아어, 버마어, 카탈루냐어, 중국어, 크로아티아어, 체코어, 덴마크어, 네덜란드어, 영어, 에스토니아어, 페로어, 핀란드어, 프랑스어, 갈리시아어, 조지아어, 독일어, 그리스어, 구자라트어, 아이티어, 하우사어, 하와이어, 히브리어, 힌디어, 헝가리어, 아이슬란드어, 인도네시아어, 이탈리아어, 일본어, 자바어, 칸나다어, 카자흐어, 크메르어, 한국어, 라오어, 라틴어, 라트비아어, 리투아니아어, 룩셈부르크어, 마케도니아어, 말라가시어, 말레이어, 말라얄람어, 몰타어, 마오리어, 마라티어, 몽골어, 네팔어, 노르웨이어, 옥시타니아어, 파슈토어, 페르시아어, 폴란드어, 포르투갈어, 펀자브어, 루마니아어, 러시아어, 산스크리트어, 세르비아어, 쇼나어, 신디어, 싱할라어, 슬로바키아어, 슬로베니아어, 소말리어, 스페인어, 순다어, 스와힐리어, 스웨덴어, 타갈로그어, 타지크어, 타밀어, 타타르어, 텔루구어, 태국어, 티베트어, 터키어, 투르크멘어, 우크라이나어, 우르두어, 우즈베크어, 베트남어, 웨일스어, 이디시어, 요루바어

### 대상 언어 (Google Translate)
**영어** (기본값), 아프리칸스어, 알바니아어, 암하라어, 아랍어, 아르메니아어, 아제르바이잔어, 바스크어, 벨라루스어, 벵골어, 보스니아어, 불가리아어, 카탈루냐어, 세부아노어, 중국어(간체), 중국어(번체), 코르시카어, 크로아티아어, 체코어, 덴마크어, 네덜란드어, 에스페란토어, 에스토니아어, 핀란드어, 프랑스어, 프리지아어, 갈리시아어, 조지아어, 독일어, 그리스어, 구자라트어, 아이티 크리올어, 하우사어, 하와이어, 히브리어, 힌디어, 몽어, 헝가리어, 아이슬란드어, 이그보어, 인도네시아어, 아일랜드어, 이탈리아어, 일본어, 자바어, 칸나다어, 카자흐어, 크메르어, 한국어, 쿠르드어, 키르기스어, 라오어, 라틴어, 라트비아어, 리투아니아어, 룩셈부르크어, 마케도니아어, 말라가시어, 말레이어, 말라얄람어, 몰타어, 마오리어, 마라티어, 몽골어, 미얀마어(버마어), 네팔어, 노르웨이어, 오디아어(오리야어), 파슈토어, 페르시아어, 폴란드어, 포르투갈어, 펀자브어, 루마니아어, 러시아어, 사모아어, 스코틀랜드 게일어, 세르비아어, 세소토어, 쇼나어, 신디어, 싱할라어, 슬로바키아어, 슬로베니아어, 소말리어, 스페인어, 순다어, 스와힐리어, 스웨덴어, 타갈로그어, 타지크어, 타밀어, 타타르어, 텔루구어, 태국어, 터키어, 투르크멘어, 우크라이나어, 우르두어, 위구르어, 우즈베크어, 베트남어, 웨일스어, 코사어, 이디시어, 요루바어, 줄루어

## ⚙️ 구성 옵션

### 오디오 설정
- **장치 선택**: 자동 감지 또는 수동 장치 선택
- **오디오 감도**: 노이즈 필터링을 위한 0.001-0.100 임계값
- **성능 모드**: 최적화된 속도 vs. 정확도 전환

### AI 모델
- **tiny**: 가장 빠름, 기본 정확도 (~40MB)
- **turbo**: 균형잡힌 속도/정확도 (~810MB) - **권장**
- **large-v3**: 최고 정확도, 느림 (~3GB)
- **distil-large-v3**: 최적화된 대형 모델 (~1.5GB)

### 자막 외관
- **글꼴 패밀리**: Segoe UI, Arial, Helvetica, Times New Roman, Calibri, Trebuchet MS, Verdana, Georgia, Comic Sans MS, Impact
- **글꼴 크기**: 10px에서 48px까지
- **위치**: 화면의 어느 곳이든 드래그하여 위치 변경
- **자동 지우기**: 2초 침묵 후 자막이 사라짐

## 🎯 앱별 오디오 캡처 가이드

### 개별 애플리케이션용
1. **가상 오디오 케이블 설치** (VB-Cable 또는 유사)
2. **애플리케이션 오디오 출력을 가상 케이블로 설정**
3. **Babel에서**: 가상 케이블 장치 선택 (🎯로 표시)
4. **번역 시작** - 이제 해당 앱의 오디오만 번역됩니다

### 시스템 오디오용
1. **Windows 사운드 설정에서 스테레오 믹스 활성화**:
   - 스피커 아이콘 우클릭 → 사운드 → 녹음 탭
   - 빈 공간 우클릭 → 비활성화된 장치 표시
   - "스테레오 믹스" 활성화
2. **Babel에서**: 스테레오 믹스 장치 선택 (🔊로 표시) 또는 자동 감지 사용

### 가상 오디오 케이블 설정
1. **VB-Audio Virtual Cable 다운로드** (무료)
2. **설치하고 컴퓨터 재시작**
3. **대상 애플리케이션을 "CABLE Input"으로 출력 설정**
4. **Babel에서**: "🎯 CABLE Output" 장치 선택
5. **선택사항**: 오디오를 들으려면 "CABLE Input"을 기본 재생 장치로 설정

## 🛠️ 문제 해결

### 오디오 감지 안됨
- **장치 선택 확인**: 먼저 "자동 (권장)" 시도
- **오디오 소스 확인**: 실제로 오디오가 재생되고 있는지 확인
- **감도 조정**: 오디오 감도 임계값을 낮춤
- **스테레오 믹스 활성화**: 위의 시스템 오디오 설정 가이드 따르기

### 통화 중 오디오 캡처가 작동하지 않음 (Zoom, Teams, Discord 등)
**컨퍼런싱 애플리케이션을 사용할 때 흔한 문제입니다. 해결 방법은 다음과 같습니다:**

#### **문제: 배타적 모드 충돌**
- **문제**: 컨퍼런싱 앱이 종종 오디오 장치를 배타적으로 제어
- **해결책**: 
  1. Windows 사운드 설정 → 장치 속성 → 고급으로 이동
  2. "애플리케이션이 이 장치를 배타적으로 제어하도록 허용" 체크 해제
  3. 마이크와 스피커 모두에 적용
  4. 두 애플리케이션 모두 재시작

#### **문제: 오디오 장치 라우팅**
- **문제**: 통화 오디오가 시스템 오디오를 우회하는 가상 장치나 에코 제거를 사용할 수 있음
- **해결책**: 
  1. **가상 오디오 케이블 설치** (VB-Cable, VoiceMeeter)
  2. **컨퍼런싱 앱에서**: 오디오 출력을 가상 케이블로 설정
  3. **Babel에서**: 가상 케이블을 입력 장치로 선택
  4. **선택사항**: 오디오를 들으려면 가상 케이블을 기본 재생 장치로 설정

#### **문제: 앱별 오디오 격리**
- **문제**: 일부 컨퍼런싱 앱이 오디오 스트림을 암호화하거나 격리
- **해결책**:
  1. **Windows 11 사용**: OBS의 "애플리케이션 오디오 캡처" 기능 시도
  2. **컨퍼런싱 앱 설정 변경**: "시스템 오디오" 또는 "컴퓨터 소리 공유" 옵션 찾기
  3. **브라우저 버전 사용**: 웹 기반 컨퍼런싱 앱이 캡처하기 더 쉬움
  4. **VoiceMeeter 시도**: 더 고급 가상 오디오 라우팅 솔루션

#### **통화 오디오 캡처를 위한 빠른 수정**
1. **통화 참여 전**: Babel을 시작하고 시스템 오디오를 캡처하는지 확인
2. **"컴퓨터 오디오 공유" 사용**: 컨퍼런싱 앱에서 이 옵션 활성화
3. **브라우저 버전으로 전환**: 종종 오디오 제한이 적음
4. **헤드폰 사용**: 캡처를 방해할 수 있는 피드백 루프 방지
5. **Windows 개인정보 설정 확인**: 모든 앱에 대해 마이크 권한이 활성화되어 있는지 확인

### 번역이 작동하지 않음
- **인터넷 연결 확인**: Google Translate에는 인터넷이 필요
- **언어 확인**: 소스 언어가 실제 오디오와 일치하는지 확인
- **자동 감지 시도**: Whisper가 소스 언어를 자동으로 감지하도록 설정
- **모델 전환**: 더 나은 정확도를 위해 "turbo" 모델 시도

### 성능 문제
- **성능 모드 활성화**: 메모리 사용량을 줄이고 속도 향상
- **더 작은 모델 사용**: "large-v3"에서 "turbo" 또는 "tiny"로 전환
- **다른 애플리케이션 닫기**: 더 나은 성능을 위해 RAM 확보
- **인터넷 속도 확인**: 느린 연결이 번역 속도에 영향

### 자막 문제
- **자막이 보이지 않음**: 오버레이가 다른 창 뒤에 있는지 확인
- **잘못된 위치**: "⚙ 자막 위치 조정"을 사용하여 이동
- **글꼴이 너무 작거나 큼**: 설정에서 글꼴 크기 조정
- **지워지지 않음**: 오디오 감도 확인 - 배경 소음을 감지하고 있을 수 있음

## 🔧 작동 원리

### 오디오 파이프라인
1. **캡처**: 선택된 장치에서 오디오 녹음 (시스템 오디오 또는 앱별)
2. **처리**: 스테레오를 모노로 변환, 노이즈 필터링 적용
3. **전사**: Faster-Whisper를 사용하여 음성을 텍스트로 변환
4. **번역**: Google Translate API가 대상 언어로 번역
5. **표시**: 자동 지우기 기능이 있는 오버레이로 자막 표시

### 기술적 세부사항
- **오디오 형식**: 48kHz 스테레오, Whisper용 16kHz 모노로 변환
- **청크 크기**: 실시간 처리를 위한 3초 오디오 세그먼트
- **메모리 관리**: 큐 크기 제한 (최대 3개 청크) 및 효율성을 위한 가비지 컬렉션
- **지연 시간 최적화**: 빔 크기 1, VAD 필터링, 최적화된 리샘플링
- **UI 프레임워크**: 향상된 탐색을 위한 사용자 정의 AlphabetComboBox 위젯이 있는 PyQt5
- **설정 저장**: 자동 저장 기능이 있는 JSON 기반 지속적 구성

### 번역 시스템 아키텍처
- **외부 JSON 파일**: 모든 번역이 `translations/` 디렉토리에 저장됨
- **동적 로딩**: 시작 시 번역이 자동으로 로드됨
- **언어 감지**: 하드코딩된 번역으로 재귀 문제 방지
- **완전한 현지화**: UI 텍스트, 언어 이름, 설명이 모두 번역됨
- **역 매핑**: 번역된 언어 이름이 설정 저장을 위해 영어로 다시 변환됨

### 설정 지속성
모든 설정이 `babel_settings.json`에 자동 저장됩니다:
```json
{
  "subtitle_y_offset": 184,
  "subtitle_x_offset": -5,
  "font_family": "Segoe UI",
  "font_size": 16,
  "source_language": "Korean",
  "target_language": "English",
  "audio_device": "Auto (Recommended)",
  "audio_device_data": -1,
  "whisper_model": "turbo",
  "audio_threshold": 0.001,
  "performance_mode": false,
  "ui_language": "Korean"
}
```

## 📁 파일 구조

```
babel/
├── main.py                    # 메인 애플리케이션 파일
├── requirements.txt           # Python 종속성
├── babel_settings.json        # 자동 저장 사용자 설정
├── run.bat                   # Windows 배치 파일로 앱 실행
├── logo.png                  # 애플리케이션 로고
├── translations/             # UI 번역 파일
│   ├── en.json              # 영어 번역
│   ├── es.json              # 스페인어 번역
│   ├── fr.json              # 프랑스어 번역
│   ├── de.json              # 독일어 번역
│   ├── pt.json              # 포르투갈어 번역
│   └── ko.json              # 한국어 번역
└── README.md                 # 이 문서
```

## 🎮 고급 사용법

### 사용자 정의 오디오 장치
애플리케이션이 자동으로 감지하는 것들:
- **🎯 가상 오디오 케이블**: 앱별 캡처용
- **🔊 시스템 오디오 장치**: 전체 시스템 오디오 캡처용  
- **🎤 마이크 입력**: 외부 오디오 소스용

### 성능 튜닝
- **속도용**: "tiny" 모델 + 성능 모드 활성화
- **정확도용**: "large-v3" 모델 + 성능 모드 비활성화
- **균형**: "turbo" 모델 (권장 기본값)

### 메모리 사용량
- **tiny 모델**: ~200MB RAM
- **turbo 모델**: ~1GB RAM  
- **large-v3 모델**: ~4GB RAM
- **distil-large-v3**: ~2GB RAM

## 📚 지원 및 기여

### 도움 받기
1. **이 README 확인**: 일반적인 해결책은 여기서 찾기
2. **요구사항 확인**: Python 3.9+, Windows OS
3. **간단한 오디오로 테스트**: 명확한 음성으로 먼저 시도
4. **콘솔 확인**: 명령줄에서 실행하여 오류 메시지 확인

### 알려진 제한사항
- **Windows 전용**: WASAPI 루프백 오디오 캡처에는 Windows 필요
- **인터넷 필요**: Google Translate API에는 인터넷 연결 필요
- **모델 다운로드**: 첫 실행 시 Whisper 모델 다운로드 (용량이 클 수 있음)
- **실시간 처리**: 약간의 지연은 정상 (1-3초)

### 향후 개선사항
- Linux/macOS 지원
- 오프라인 번역 옵션
- 사용자 정의 자막 테마
- 배치 파일 처리
- 외부 통합을 위한 API

## 🆕 최신 기능 및 업데이트

### **향상된 사용자 경험** 
- **모든 설정 자동 저장**: 모든 구성이 `babel_settings.json`에 자동 저장
- **알파벳 탐색**: 드롭다운에서 문자를 입력하여 언어로 빠르게 이동
- **개선된 UI**: 더 나은 간격과 시각적 피드백을 가진 모던 다크 테마
- **스마트 기본값**: 영어 대상 언어, turbo 모델 미리 선택

### **완전한 인터페이스 현지화**
- **6개 UI 언어**: 영어, 스페인어, 프랑스어, 독일어, 포르투갈어, 한국어 완전 지원
- **동적 언어 전환**: 인터페이스 언어를 변경하면 즉시 업데이트됨
- **하드코딩된 번역**: 재귀를 방지하기 위해 모든 언어 이름이 번역됨
- **포괄적 범위**: 각 인터페이스 언어에서 70개 이상의 언어가 번역됨

### **고급 자막 사용자 정의**
- **10가지 글꼴 옵션**: Segoe UI, Arial, Helvetica, Times New Roman 등
- **13가지 글꼴 크기**: 완벽한 가시성을 위한 10px에서 48px까지
- **드래그 위치 조정**: "⚙ 자막 위치 조정"을 클릭하고 화면의 어느 위치로든 드래그
- **자동 지우기**: 2초 침묵 후 자막이 사라짐
- **모던 디자인**: 반투명 배경과 텍스트 윤곽선

### **스마트 오디오 장치 감지**
- **자동 분류**: 🎯 (가상 케이블), 🔊 (시스템 오디오), 🎤 (마이크)로 표시된 장치
- **지능적 우선순위**: 사용 가능한 최고의 루프백 장치를 자동으로 선택
- **장치 세부정보**: 각 장치의 채널 및 샘플 레이트 표시
- **새로 고침 기능**: 재시작 없이 장치 목록 업데이트

### **성능 최적화**
- **성능 모드**: 속도 vs 정확도 최적화 전환
- **메모리 관리**: 자동 가비지 컬렉션 및 큐 크기 제한
- **최적화된 모델**: distil-large-v3 (최적화된 대형 모델) 지원
- **VAD 필터링**: 침묵 처리를 줄이는 음성 활동 감지

---

**Babel** - 모든 사람이 실시간 번역에 접근할 수 있도록 합니다. 국제 게임, 외국 콘텐츠 시청 또는 새로운 언어 학습에 완벽합니다!
